diff --git a/package/Elements.svelte b/package/Elements.svelte
index 89b9926d52f7cbe2139c53086c4ce5a2233e82b0..94b56816b090230499cb926230235c3b4a05785d 100644
--- a/package/Elements.svelte
+++ b/package/Elements.svelte
@@ -1,66 +1,72 @@
 <script>
-  import { setContext } from 'svelte'
-  import { isServer, register } from './util'
+    import { setContext } from "svelte";
+    import { isServer, register } from "./util";
 
-  /** @type {import('@stripe/stripe-js').Stripe?} */
-  export let stripe
+    /** @type {import('@stripe/stripe-js').Stripe?} */
+    export let stripe;
 
-  /** @type {StripeElementsOptions["mode"]} */
-  export let mode = undefined
+    /** @type {StripeElementsOptions["mode"]} */
+    export let mode = undefined;
 
-  /** @typedef { import('@stripe/stripe-js').Appearance } Appearance */
+    /** @typedef { import('@stripe/stripe-js').Appearance } Appearance */
 
-  /** @type {Appearance["theme"]} */
-  export let theme = 'stripe'
+    /** @type {Appearance["theme"]} */
+    export let theme = "stripe";
 
-  /** @type {Appearance["variables"]} */
-  export let variables = {}
+    /** @type {Appearance["variables"]} */
+    export let variables = {};
 
-  /** @type {Appearance["rules"]} */
-  export let rules = {}
+    /** @type {Appearance["rules"]} */
+    export let rules = {};
 
-  /** @type {Appearance["labels"]} */
-  export let labels = 'above'
+    /** @type {Appearance["labels"]} */
+    export let labels = "above";
 
-  /** @typedef { import('@stripe/stripe-js').StripeElementsOptions } StripeElementsOptions */
+    /** @typedef { import('@stripe/stripe-js').StripeElementsOptions } StripeElementsOptions */
 
-  /** @type {StripeElementsOptions["loader"]} */
-  export let loader = 'auto'
+    /** @type {StripeElementsOptions["loader"]} */
+    export let loader = "auto";
 
-  /** @type {StripeElementsOptions["fonts"]} */
-  export let fonts = []
+    /** @type {StripeElementsOptions["fonts"]} */
+    export let fonts = [];
 
-  /** @type {StripeElementsOptions["locale"]} */
-  export let locale = "auto"
+    /** @type {StripeElementsOptions["locale"]} */
+    export let locale = "auto";
 
-  /** @type {StripeElementsOptions["currency"]} */
-  export let currency = undefined
+    /** @type {StripeElementsOptions["currency"]} */
+    export let currency = undefined;
 
-  /** @type {StripeElementsOptions["amount"]} */
-  export let amount = undefined
+    /** @type {StripeElementsOptions["amount"]} */
+    export let amount = undefined;
 
-  /** @type {string?} */
-  export let clientSecret = undefined
+    /** @type {string?} */
+    export let clientSecret = undefined;
 
-  $: appearance = {
-    theme, variables, rules, labels
-  }
+    $: appearance = {
+        theme,
+        variables,
+        rules,
+        labels,
+    };
 
-  /** @type {import('@stripe/stripe-js').StripeElements?} */
-  export let elements = null
+    /** @type {import('@stripe/stripe-js').StripeElements?} */
+    export let elements = null;
 
-  $: if (stripe && !elements) {
-    elements = stripe.elements({ mode, currency, amount, appearance, clientSecret, fonts, loader, locale })
+    const ctx = { stripe: null, elements: null };
+    setContext("stripe", ctx);
 
-    register(stripe)
-    setContext('stripe', { stripe, elements })
-  }
+    $: if (stripe && !ctx.elements) {
+        elements = stripe.elements({ mode, currency, amount, appearance, clientSecret, fonts, loader, locale });
+        register(stripe);
+        ctx.stripe = stripe;
+        ctx.elements = elements;
+    }
 
-  $: if (elements) {
-    elements.update({ appearance, locale })
-  }
+    $: if (elements) {
+        elements.update({ appearance, locale });
+    }
 </script>
 
 {#if stripe && elements}
-  <slot />
+    <slot />
 {/if}
